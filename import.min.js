function url2Object(a){return new Promise((b,c)=>{document.getElementById("locationFrame")||document.body.append((d=document.createElement("iframe"),d.id="locationFrame",d.style.display="none",d));var d=document.getElementById("locationFrame");try{d.onload=()=>{d.onload=()=>{x=new XMLHttpRequest,x.open("GET",d.contentWindow.location.href),x.onreadystatechange=()=>{if(4==x.readyState)switch(x.status){case 404:d.onload=()=>{x=new XMLHttpRequest,x.open("GET","https://"+a),x.onreadystatechange=()=>{if(4==x.readyState)switch(x.status){case 200:case 304:b(d.contentWindow.location);break;default:c({xhr:x,attempt:"https://"+a});}},x.send()},d.src="https://"+a;break;default:b(d.contentWindow.location);}},x.send()},d.src=a},d.src=location.href}catch(a){c(a)}})}function importURL(a,b){b=b?b:{};var c=new Promise(function(a,b){return function(c,d){var e={options:b};url2Object(a).then(a=>{e.URL=a,x=new XMLHttpRequest,x.onreadystatechange=function(a,b,c,d,e){if(4==a.readyState&&200==a.status){switch(this.URL.fileext){case".js":this.response=e.runJSCode?new Function(a.response).bind(window)():a.response;break;default:this.response=a.response;}b(d)}else 4==a.readyState&&c(d)}.bind(e,x,c,d,e,b),x.open("GET",e.URL.href),x.send(),e.xhr=x}).catch(a=>{d(a)})}}(a,b));return c}
